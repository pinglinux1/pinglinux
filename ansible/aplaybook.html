
<!DOCTYPE html>
<html lang="en">
  <head>
	 <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    	 <!-- Copy this two files and save them in the dir named js -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> 
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <!-- Meta tag provides the information about the html document -->

    <meta name="description" content="its about linux and devops tools">
    <meta name="author" content="Bikram Bhandari">

    <title> Puppet </title>

    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    
   <!-- Custom styles for this template which is defined in the css folder-->
    <link href="../css/justified-nav.css" rel="stylesheet">
   <link href="../css/home.css" rel="stylesheet">
   <link href="../css/command.css" rel="stylesheet">
 
    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>

  <body>
  <!-- Script to connect to fb-->
  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.10";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div class="container">

      <!-- The justified navigation menu is meant for single line per list item.
           Multiple lines will require custom code not provided by Bootstrap. -->
      <div class="masthead">
        <h3 class="text-muted title">Ping Linux</h3>
       <div class="bs-example">
	<nav >
          <ul class="nav nav-justified nav-pills" role="tablist">
	    <li class="active active badge"><a href="../index.html">Home</a></li>
	    <!----submenu in the contents ------->
 
	    <li class="dropdown active badge col-md-6"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Contents<b class="caret"></b></a>
			<ul class="dropdown-menu col-xs-12" role="menu" style="text-align:center;">

                            <li><a href="../contents/introtolinux.html">Into to Linux</a></li>
                            <li><a href="../contents/filemanagement.html">File management</a></li>
                            <li><a href="../contents/textediting.html">Text Editing & processing</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/filepermissions.html">File Permissions,Users and Groups</a></li>
			    <li><a href="../contents/packageinstall.html">Package Install and  Management</a></li>
                            <li><a href="../contents/processmanagement.html">Process Management</a></li>
			    <li><a href="../contents/networkutilities.html">Network Utilities</a></li>
			    <li><a href="../contents/compressedfiles.html">Compressed Files & logging</a></li>
			    <li><a href="../contents/filestransfer.html">Files transfer</a></li>
			    <li><a href="../contents/firewall.html">Firewalls and Security </a></li>
			</ul>
                    </li>
		<li class="dropdown active badge col-md-6"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Devops<b class="caret"></b></a> 
			<ul class="dropdown-menu col-xs-12" role="menu" style="text-align:center;">
			<li><a href="../vagrant/vagrant.html">Vagrant</a></li>                                                     <li class="divider"></li>
                                <li><a href="../devops/puppet.html">Puppet</a></li>
                                <li class="divider"></li>
                                <li><a href="../ansible/ansible.html"> Ansible</a></li>
                                <li class="divider"></li>
                                <li><a href="../git/git.html">Git</a></li>    		
	
			</li>	
            <li class="active badge"><a href="../contact.html">Contact</a></li>
	</ul>
        </nav>
      </div>
     </div>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- top -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-5629969818459684"
     data-ad-slot="2973793853"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-lg-7">
          <h2>Ansible Playbook</h2>
            <!-- Display fb button here -->
                      <div style="display: block;text-align: right;" class="fb-share-button" data-href="http://www.pinglinux.com/ansible/aplaybook.html" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.pinglinux.com%2F&amp;src=sdkpreparse">Share</a></div>
	   <hr></hr>
          <p class="text-danger bluefont">What is playbook ? </p>
          <p class="pfont">It is a series of commands(ansible module) in a file that are targeted to the particular host or groups. i.e. ansible configuration management script to manage some host.It has a .yml format. </p>
	<pre>cat httpd.yml </pre>
	  </div>
	</div>
	<hr> </hr>
	<div class="row">
	  <div class="col-lg-6">
           <p class="bluefont"> Play book to install and start the httpd service</p>
	 	<p class="pfont"> </p>
		<pre>$ cat httpd.yml </pre>
	        <img src="../ansiblepict/playbook.png" alt="playbook" style="width:100%;height:100%;">
		<p></p>
		<p command="pfont">Notify calls the handlers once it get executed.This is one of the way to solve the order of the tasks.Without notify, ansible might execute the sevice start task, which will through the error,b/c httpd has to be installed before starting it.</p>
		<pre>anisble-playbook httpd.yml -l 192.168.1.1 -i hosts </pre>
	        <img src="../ansiblepict/playbook3.png" alt="playbook" style="width:100%;height:100%;">
		</div>
		<div class="col-lg-6">
	   <p class="bluefont">Handlers and tasks</p>
	  <p class="pfont"><b> Handlers and tasks</b> are the way to perform the ansible modules.Handlers only get performed when tasks calls it.it is the secondary options that might be requied after certain tasks execution. </p>
	 <p class="pfont"><b>Notify </b> </p>
	  <p class="pfont">Notify is used to Notify the handlers after the task is run </p>
	 <p class="pfont"><b>When </b> </p>
	  <p class="pfont">when is similar to the Notify, which tells ansible to run the task, when somthing else happend. To perform the series of tasks in order. </p>
	   <p class="pfont"><b>variable </b> </p>
	  <p class="pfont">vars: is used to store the variable. </p>
	  <pre>- vars:
hostname=192.168.1.152</pre>
	 <p class="pfont"><b>register </b> </p>
	<p class="pfont"><b> it holds the result of the task</b> </p>
	<pre>register: result </pre>
	<pre> result | success or failure </pre>
	<p class="pfont"><b>hosts</b> List of machines, on which the following task will be performed </p>
       <p class="pfont"><b>remote_host </b>remote user account which  will be used to perform the tasks.</p>
	</div>
      </div>
      <hr> </hr>
	   <div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> Play book to change the file of the running applications and restart the service</p>
                <p class="pfont"></p>
                <pre>$ cat httpd1.yml</pre>
	        <img src="../ansiblepict/playbook4.png" alt="playbook" style="width:100%;height:100%;">
	       <pre>anible-playbook -l 192.168.1.5 httpd1.yml -i hosts </pre>
	         <img src="../ansiblepict/playbook5.png" alt="playbook" style="width:100%;height:100%;">
                </div>
                <div class="col-lg-6">
           <p class="bluefont">Play book to use the su command and switch the user in the remote host</p>
          <p class="pfont">Login as root.</p>
	  <pre>---
- hosts: webservers
  remote_user: root
	  </pre>
	<p class="pfont">Login as root, but perform some asks as user.</p>
          <pre>---
- hosts: webservers
  remote_user: root
 - tasks:
	name:
	copy:
	remote_user: yourname
          </pre>
	<p class="pfont">Run certain command as root users.</p>
          <pre>---
- hosts: webservers
  remote_user: yourname
  sudo: yes
          </pre>
	 <p class="pfont">Run entire command as root user, by changing to su or different users</p>
          <pre>---
- hosts: webservers
  remote_user: yourname
  become: yes
  become_method: differentname or su
          </pre>
       </div>
      </div>
     <hr> </hr>
           <div class="row">
          <div class="col-lg-6">
     <p class="bluefont"> Play book to use when/register command to install httpd service,change the httpd.conf file,restart the service and change user to pinglinux from root to perfom all the tasks.		</p>
                <p class="pfont"></p>
                <pre>$ cat httpd3.yml</pre>
		<p></p>
		<pre>
---
- hosts: 52.27.31.164
  remot_user:root
  become:yes
  become_users: httpd #all tasks will be perfored as httpd users
  vars: 
    http_port: 80 
    src_httpd: /Users/Biks/Documents/ansible/index.html 
    dest_httpd: /var/www/html/index.html
  tasks:
  - name: Installing the httpd web applications
    yum: name=httpd state=latest
    register: result
  tasks:
  - name: copying the index.html file
    copy: src={{ '{{' }} src_httpd {{ '}}' }} dest={{ '{{' dest_httpd '}}' }} mode=700 owner=httpd
    when: register | success 
    notify: # first perform this task and notify starting the httpd service 
    - starting the httpd service
  handlers:
  - name: starting the httpd service
    service: name=httpd state=restarted


		</pre>
        </div>
    </div>


	<nav>
  		<ul class="pager button active">
    			<li><a href="amodule.html"><span aria-hidden="true">&larr;</span>Previous</a></li>
    			<li><a href="atemplates.html">Next<span aria-hidden="true">&rarr;</span></a></li>
  		</ul>
	</nav>
     <hr></hr>
 </div>
  </div> <!-- /container -->
  <!-- Jumbotron -->
      <div class="jumbotron footerdev">
        <h1>Smart Technology begins here!!</h1>
        <p> Welcome to the site. Here you can find useful information about linux command, there usages, as well as the devops tools and the installation process.</p>
        <p><a class="btn btn-primary " href="../contents/introtolinux.html" role="button">Get started today</a></p>
      </div>
<!-- Site footer -->

      <footer class="footer copyright">
        <p>&copy; Pinglinux 2014</p>
      </footer>

    
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
