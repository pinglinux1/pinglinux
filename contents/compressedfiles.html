
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    	 <!-- Copy this two files and save them in the dir named js -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  	<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script> 
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <!-- Meta tag provides the information about the html document -->

    <meta name="description" content="its about linux and devops tools">
    <meta name="author" content="Bikram Bhandari">
    <link rel="icon" href="../../favicon.ico">

    <title> Managing the log files</title>

     <style type="text/css">
         
    </style>
    <!-- Bootstrap core CSS -->
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    
   <!-- Custom styles for this template which is defined in the css folder-->
    <link href="../css/justified-nav.css" rel="stylesheet">
   <link href="../css/home.css" rel="stylesheet">
   <link href="../css/command.css" rel="stylesheet">

    <!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
    <script src="js/ie-emulation-modes-warning.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

  <!-- Script to connect, create fb button-->
  <div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.10";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <div class="container">

      <!-- The justified navigation menu is meant for single line per list item.
           Multiple lines will require custom code not provided by Bootstrap. -->
      <div class="masthead">
        <h3 class="text-muted title">Ping Linux</h3>
       <div class="bs-example">
	<nav >
	<ul class="nav nav-justified nav-pills" role="tablist" >
            <li class="active badge"><a href="../index.html">Home</a></li>
            <!----submenu in the contents ------->

            <li class="dropdown badge active col-md-6"><a href="#" data-toggle="dropdown" class="dropdown-toggle">Contents<b class="caret"></b></a>
                        <ul class="dropdown-menu col-xs-12" role="menu" style="text-align:center;" aria-labelledby="dLabel">

                            <li><a href="../contents/introtolinux.html">Into to Linux</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/filemanagement.html">File management</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/textediting.html">Text Editing & processing</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/filepermissions.html">File Permissions,Users and Groups</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/packageinstall.html">Package Install and  Management</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/processmanagement.html">Process Management</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/networkutilities.html">Network Utilities</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/compressedfiles.html">Compressed Files & logging</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/filestransfer.html">Files transfer</a></li>
                            <li class="divider"></li>
                            <li><a href="../contents/firewall.html">Firewalls and Security </a></li>
                        </ul>
                    </li>
                <li class="dropdown badge active col-md-6"><a href="#" data-toggle="dropdown" class="dropdown-toggle" >Devops<b class="caret"></b></a>
                        <ul class="dropdown-menu col-xs-12" role="menu" style="text-align:center;" aria-labelledby="dLabel">
                <li><a href="../vagrant/vagrant.html">Vagrant</a></li>                                                     <li class="divider"></li>
                                <li><a href="../devops/puppet.html">Puppet</a></li>
                                <li class="divider"></li>
                                <li><a href="../ansible/ansible.html"> Ansible</a></li>
                                <li class="divider"></li>
                                <li><a href="../git/git.html">Git</a></li>        
		</ul>
            </li>
            <li class="active badge"><a href="contact.html">Contact</a></li>
        </ul>

        </nav>
      </div>
     </div>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- top -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-5629969818459684"
     data-ad-slot="2973793853"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>     
      <!-- Example row of columns -->
      <div class="row">
        <div class="col-lg-7">
          <h2>Log Management</h2>
            <!-- Display fb button here -->
                      <div style="display: block;text-align: right;" class="fb-share-button" data-href="http://www.pinglinux.com/contents/compressedfiles.html" data-layout="button" data-size="large" data-mobile-iframe="true"><a class="fb-xfbml-parse-ignore" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.pinglinux.com%2F&amp;src=sdkpreparse">Share</a></div>
	   <hr></hr>
          <p class="text-danger bluefont">what is log file and log rotation, truncate ?</p>
          <p class="pfont">Log files are the plain text file which keeps in some manner everything happening on and to the system.This are the main importance resources  used to trouble-shoot system and application issues. Log files are kept in /var/log/ of the system.</p>
	 <p class="pfont">Log rotation is the process of automatic rotation, archiving, compressing and deleting or mailing of  the dated of log files. Log rotate run on daily basic from cron job.</p>
	<p class="pfont">Truncate command in linux shrink or extends the size of the file to specified size. </p>
	  </div>
	</div>
	<h2> Combining multiples files or directories into single file and compressing it </h2>
	<div class="row">
	  <div class="col-lg-6">
           <p class="bluefont"> tar -cvf </p>
		<p> it archives the files.</p>
		<pre> tar -cvf  file0.tar file1.txt file2.txt </pre>
	 	<p class="pfont"> </p>
                <img src="../compressed/tar1.png" alt="unatr" style="height:100%lwidth:100%">
	  </div>
	  <div class="col-lg-6">
	   <p class="bluefont">tar -tvf </br></p>
		<p> Displays the all the files that are archived. </p>
		 <pre> tar -tvf file0.tar </pre>
                <img src="../compressed/tar2.png" alt="unatr" style="height:100%lwidth:100%">
		
        </div>
      </div>
	<div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> tar -xvf </p>
                <p class="pfont"> it seperates the archived files.</p>
                <pre> tar -xvf  file0.tar file1.txt file2.txt </pre>
                <img src="../compressed/tar3.png" alt="unatr" style="height:100%lwidth:100%">
          </div>
          </div>	
	<hr></hr>
	<h2> Compressing and uncompressing the archived files </h2>	
	<div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> gzip filename.tar.gz taredfile.tar </p>
                <p> it compresses the file.</p>
                <pre> gzip file0.tar.gz file0.tar  </pre>
                <p class="pfont"> </p>
                <img src="../compressed/gzip.png" alt="unatr" style="height:100%lwidth:100%">
		<pre> tar -czvf file0.tar.gz file1.txt file2.txt</pre>
          </div>
          <div class="col-lg-6">
           <p class="bluefont">gunzip  filename.tar.gz</br></p>
                <p>it uncompresses the file. </p>
                 <pre> gunzip file0.tar.gz </pre>
                <img src="../compressed/gunzip.png" alt="unatr" style="height:100%lwidth:100%">
		<pre> tar -xzvf file0.tar.gz </pre>
        </div>
	</div>
	<hr> </hr>
	 <h2> du and df ( disk usage  and disk free ) </h2>
	<p>If a process is holding open a file, and that file is removed, the space 
	   belonging to the file is not freed until the process either exits or 
	   closes the file. This space is counted by "df" but not by "du"  </p>
	 <p> Can use LSOF command to find which processes are holding open a particular file </p>
	<hr> </hr>
	<div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> df -h </p>
                <p> Shows the overall disk space used in the syetem</p>
                <pre> df -h </pre>
                <p class="pfont"> </p>
                <img src="../compressed/df.png" alt="unatr" style="height:100%lwidth:100%">
                
          </div>
          <div class="col-lg-6">
           <p class="bluefont">du -sh *</br></p>
                <p>Shows the size of the individual file or directories </p>
                 <pre> du -sh </pre>
                <img src="../compressed/du.png" alt="unatr" style="height:100%lwidth:100%">
                
        </div>
        </div>
	<h2> truncate </h2>
	<p> Decreaseing or increasing the size of the file without deleting it.</p>
	<hr> </hr>
        <div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> truncate</p>
                <p> shrinking the size of the file</p>
                <pre>truncate -s 0 filename.txt </pre>
             
                <img src="../compressed/tuncate1.png" alt="truncate" style="height:100%lwidth:100%">

          </div>
          <div class="col-lg-6">
           <p class="bluefont">cat /dev/null > file.txt or cp /dev/null file.txt  </br></p>
                <p>Making  the size of the file to 'O' without deleting it </p>
                 <pre>cat /dev/null >file1.txt  </pre>
                <img src="../compressed/tuncate2.png" alt="truncate" style="height:100%lwidth:100%">

        </div>
        </div>
      <h2> Head and tail command </h2>
        <p> Saving the data from top and bottom of the file.</p>
        <hr> </hr>
        <div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> head</p>
                <p> Displays the data from the top of the file</p>
                <pre>head -c 14MB file.txt > newfile.txt </pre>
              
               

          </div>
          <div class="col-lg-6">
           <p class="bluefont">tail  </br></p>
                <p>Displays the data from the bottom of the file. </p>
                 <pre>tail -c 14MB file.txt > newfile.txt  </pre>
                

        </div>
        </div>
	<hr></hr>
	 <h2> Log Rotation</h2>
	 </p> Log rotation is setup to reduce the disk space take by log files </p>
        <p> All the settings for the log rotation are kept in  /etc/logrotate.conf/ and /etc/logrotate.d/ </p>
	<p> ALL the system logs are kept in /etc/logrotate.conf. New applications or packages keeps its log in the /etc/logrotate.d/</p>
        <hr> </hr>
        <div class="row">
          <div class="col-lg-6">
           <p class="bluefont"> default logrotate configuration file logrotate.conf </p>
                <p></p>
		
                <pre>weekely : rotate log files weekely </pre>
		<pre>rotate 4 : keep four weeks worth of log files </pre>
		<pre>create 600 root root: create new log files after rotating new one  </pre>
		<pre> dateext : use date as a suffix to save the files during rotation </pre>
		<pre> compress : compresses the log files during the rotation </pre>
                <pre> include : new rpm package installed will keep its log rotation file to the path specifed her </pre> 
                <pre>mail : mail the log files to the email specifed </pre>
		<pre>copy : copy the rotated files </pre>
		<pre> postrotate	:run the script after the log rotation
		/home/tomuser/somescrip.sh
		endscript
		</pre>	
		<pre> copytruncate : truncate the file to size 0 and start writng log on the same files, rather createing new one </pre>
		<pre> maxage 10 : Deletes the rotated files after a specific number of days </pre>
		<pre> size 1k : rotate the log files only afer file size reaches 1k </pre>

          </div>
          <div class="col-lg-6">
           <p class="bluefont">Lets get started to include logrotation for new application  </br></p>
                <p>vi /etc/logrotate.d/pinglinux  </p>
		<pre>[root@newhostnme log]# cat /etc/logrotate.d/testlogrotate 
			/var/log/pinglinux.log {
			missingok
			notifempty	
			compress
			#size 5k
			daily
			copytruncate
			create 0600 root root		
			mail abc012@gmail.com	
			copy		
}  				</pre>
		<p> create some sample log files </p>
                 <pre> [root@newhost]# echo "sample log rotation" > /var/log/pinglinux.log</pre>
		<p>Run the rotation for test purpose </p>
		<pre> [root@newhost]# logrotate -f /etc/logrotate.conf  </pre>
               <p> You will see the output </p>
		<pre>ls /var/log/   pinglinux.log-20151226.gz 	</pre>
		<p> And the pinglinux.log file is truncate to size '0'. its empty file now </p>
		<pre> cat pinglinux.log</br>[root@newhost]#  </pre> 

        </div>
        </div>	
		<h4> Log rotation is the first step in log file management </h4>
		<h4> Adding the additional disk is also one of the solution </h4>
		<h4> Turn off the unnecessary logs from getting saved  </h4>
     <hr></hr>

    </div> <!-- /container -->
  <!-- Jumbotron -->
      <div class="jumbotron footerdev">
        <h1>Smart Technology begins here!!</h1>
        <p> Welcome to the site. Here you can find useful information about linux command, there usages, as well as the devops tools and the installation process.</p>
        <p><a class="btn btn-primary " href="introtolinux.html" role="button">Get started today</a></p>
      </div>
<!-- Site footer -->

      <footer class="footer copyright">
        <p>&copy; Pinglinux 2014</p>
      </footer>

    
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
